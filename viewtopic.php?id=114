<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>forum.bittorrent.org / BEP 32 IPv6 support for the DHT</title>
<link rel="stylesheet" type="text/css" href="style/Kontrast.css" />
</head>
<body>

<div id="punwrap">
<div id="punviewtopic" class="pun">

<div id="brdheader" class="block">
	<div class="box">
		<div id="brdtitle" class="inbox">
			<h1><span>forum.bittorrent.org</span></h1>
			<p><span>BitTorrent.org community</span></p>
		</div>
		<div id="brdmenu" class="inbox">
			<ul>
				<li id="navindex"><a href="index.php">Index</a></li>
				<li id="navextra1"><a href="http://forum.bittorrent.org">Homepage</a></li>
				<li id="navextra2"><a href="irc://irc.freenode.net/bittorrent">IRC</a></li>
				<li id="navuserlist"><a href="userlist.php">User list</a></li>
				<li id="navrules"><a href="misc.php?action=rules">Rules</a></li>
				<li id="navsearch"><a href="search.php">Search</a></li>
				<li id="navregister"><a href="register.php">Register</a></li>
				<li id="navlogin"><a href="login.php">Login</a></li>
			</ul>
		</div>
		<div id="brdwelcome" class="inbox">
			<p>You are not logged in.</p>
		</div>
	</div>
</div>

<div id="announce" class="block">
	<h2><span>Announcement</span></h2>
	<div class="box">
		<div class="inbox">
			<div>Posting about any illegal sharing of copyrighted content is strictly forbidden.</div>
		</div>
	</div>
</div>

<div class="linkst">
	<div class="inbox">
		<p class="pagelink conl">Pages: <strong>1</strong>&nbsp;<a href="viewtopic.php?id=114&amp;p=2">2</a></p>
		<p class="postlink conr">&nbsp;</p>
		<ul><li><a href="index.php">Index</a></li><li>&nbsp;&raquo;&nbsp;<a href="viewforum.php?id=25">BEPs</a></li><li>&nbsp;&raquo;&nbsp;BEP 32 IPv6 support for the DHT</li></ul>
		<div class="clearer"></div>
	</div>
</div>

<div id="p659" class="blockpost rowodd firstpost">
	<h2><span><span class="conr">#1&nbsp;</span><a href="viewtopic.php?pid=659#p659">2009-10-15 15:27:51</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3>BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>The proposal is up at:<br /><br />&nbsp; <a href="http://www.bittorrent.org/beps/bep_0032.html" rel="nofollow">http://www.bittorrent.org/beps/bep_0032.html</a><br /><br />My comments are:<br /><br />I think the specification should mandate dual stack nodes to use the same ID. This would increase the overlap and usefulness of the ability for find_nodes to return nodes from both address families. If every node would be a dual stack node, it would essentially bring down the overhead back to just a single DHT.<br /><br />Since the &quot;values&quot; already is a list, I don't think we need a &quot;values6&quot; for it. The flags/want could still be used to filter what is returned though (as to not waste bandwidth).<br /><br />I think that get_peers should always return &quot;nodes&quot;, and I don't think this specification should or need to depend on either implementation.<br /><br />I agree with 8472 that maybe some more generic name like &quot;flags&quot; would be preferred over &quot;want&quot;. I'm not sure I like the idea of bloating it too much with actual strings, just because requests have more space to spare.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p663" class="blockpost roweven">
	<h2><span><span class="conr">#2&nbsp;</span><a href="viewtopic.php?pid=663#p663">2009-10-15 15:43:54</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><h4>jch wrote:</h4><p>&gt; @jch: you seemed to have some reservation about returning &quot;nodes&quot; together with &quot;values&quot; to a get_peers request. What is your concern with doing that?<br /><br />How do existing implementations parse a get_peers reply?&nbsp; I can see three reasonable ways:<br /><br />1. parse both nodes and values if they are present.&nbsp; (This is what Transmission does.)<br />2. check for values, and if it is absent, check for nodes.<br />3. check for nodes, and if it is absent, check for values.</p></div></blockquote><p>The mainline DHT plugin for azureus uses method 2 atm. <br /><br />We also have to consider packet sizes. Worst case would be nodes, nodes6, values. nodes + nodes 6 with 16 nodes IDs, IPs and ports + bencoding overhead would be about 576 bytes. that leaves us about 800 bytes for the values, assuming they're all IPv6 then we can still put about 40 peers into a single get_peers response.<br /><br />Seems reasonable.<br /><br /><br /></p><blockquote><div class="incqbox"><h4>jch wrote:</h4><p>&gt; i'd really like the spec to be changed nodes can officially omit the token as a way to indicate that they will not service a store request.<br /><br />No objection.&nbsp; I won't be sending token-less replies in Transmission (I prefer to simply drop the announce_peers request), but I will be parsing token-less replies in the next version.</p></div></blockquote><p>I would suggest otherwise since it would allow the node performing the store to remove you from the best-matches list and look for other nodes instead to perform the store on. Consider everyone of the 8 closest nodes to a specific key silently dropping an announce. The data would get lost and the peer wouldn't be any wiser.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p668" class="blockpost rowodd">
	<h2><span><span class="conr">#3&nbsp;</span><a href="viewtopic.php?pid=668#p668">2009-10-15 16:16:17</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><h4>arvid wrote:</h4><p>I agree with 8472 that maybe some more generic name like &quot;flags&quot; would be preferred over &quot;want&quot;. I'm not sure I like the idea of bloating it too much with actual strings, just because requests have more space to spare.</p></div></blockquote><p>well, i suggested that out of experience with the reserved bitfield vs. named messages in bittorrent. The latter is a lot more flexible. We're using bencoding for a reason. Everytime we don't it bites us in our behind at some point.<br /><br />Case in point: nodes6 is only necessary because nodes is not a list but a compact byte array.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p672" class="blockpost roweven">
	<h2><span><span class="conr">#4&nbsp;</span><a href="viewtopic.php?pid=672#p672">2009-10-15 17:43:33</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<div class="codebox"><div class="incqbox"><h4>Code:</h4><div class="scrollbox" style="height: 10.5em"><pre>Once bootstrap is successful, a node should not request data in both
address families; it should only request &quot;nodes&quot; replies from IPv4 nodes,
and &quot;nodes6&quot; replies from IPv6 nodes.  Requesting both address families is
unlikely to provide any useful information, and unnecessarily increases
network traffic.</pre></div></div></div><p>This does not seem motivated enough to me. I would imagine that you would be able to decrease the amount of network bandwidth by interleaving and mixing requests to the two DHT networks, by requesting nodes from both address families on each find_node request.<br /><br />It's also not obvious to me why &quot;values&quot; and &quot;values6&quot; ignores the &quot;want&quot; flags.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p673" class="blockpost rowodd">
	<h2><span><span class="conr">#5&nbsp;</span><a href="viewtopic.php?pid=673#p673">2009-10-15 17:49:45</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>I would suggest the following change, to discard the &quot;values6&quot; key and not restrict the address families returned in &quot;values&quot; and allow control over that through the &quot;want&quot; key and strongly suggesting dual stack nodes to share the node ID.<br /><br /></p><div class="codebox"><div class="incqbox"><h4>Code:</h4><div class="scrollbox" style="height: 35em"><pre>Index: bep_0032.rst
===================================================================
--- bep_0032.rst    (revision 11179)
+++ bep_0032.rst    (working copy)
@@ -105,7 +105,14 @@
 network outage, a node may *ocasionally* send a request for &quot;nodes&quot; to an
 IPv6 node, or a request for &quot;nodes6&quot; to an IPv4 node.
 
+Node id
+'''''''
 
+A dual stack node SHOULD have the same node-id for both DHT networks. This
+increases the overlap of IPv4 and IPv6 nodes which improves performance when
+reuesting nodes from multiple address families in the same request.
+
+
 Changes and extensions to existing messages
 ===========================================
 
@@ -121,12 +128,11 @@
 IPv6 routing table.
 
 
-values6
-'''''''
+values
+''''''
 
-The &quot;values6&quot; parameter is allowed in replies to the get_peers message
-being sent over IPv6.  Its value is a list of strings, each of which
-contains compact format IPv6 contact information for a single peer.
+The &quot;values&quot; parameter is allowed in to contain list entries for compact
+IPv6 endpoints.
 
 
 want
@@ -162,28 +168,12 @@
 include &quot;nodes&quot; if the request was sent over IPv4, and include &quot;nodes6&quot; if
 the request was sent over IPv6.
 
-For a get_peers request with no &quot;want&quot; parameter, value should only be
-included if there is no &quot;values&quot; or &quot;values6&quot; parameter.  If no &quot;values&quot; or
-&quot;values6&quot; parameter is being sent, the presence of &quot;nodes&quot; or &quot;nodes6&quot; is
-governed by the network-layer protocol of the request, as above.
+For a get_peers request with no &quot;want&quot; parameter, &quot;values&quot; should only include
+entries of the same address family as the address family the request was
+received over, unless the &quot;want&quot; flags indicates which address family the
+requesting node is interested in.
 
-   **Rationale**: it has been suggested that the reply to a get_peers
-   request should always include a &quot;nodes&quot; or &quot;nodes6&quot; parameter,
-   independently of the presence of a &quot;values&quot; or &quot;values6&quot; parameter.
-   While this is clearly a better semantics, it is not backward-compatible,
-   and it is not known whether it breaks any deployed implementations.
 
-When a node receives a get_peers request and it has contact information for
-the matching address family and info-hash, it should include either
-a &quot;values&quot; parameter (if the request was sent over IPv4) or a &quot;values6&quot;
-parameter in the reply.
-
-A reply sent over IPv4 must not contain a &quot;values6&quot; parameter, and a reply
-sent over IPv6 must not contain a &quot;values&quot; parameter.  In other words, the
-&quot;want&quot; parameter only governs the presence of the &quot;nodes&quot; and &quot;nodes6&quot;
-parameters.
-
-
 announce_peers
 ''''''''''''''</pre></div></div></div>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p676" class="blockpost roweven">
	<h2><span><span class="conr">#6&nbsp;</span><a href="viewtopic.php?pid=676#p676">2009-10-15 18:26:09</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Restricting the address families in values makes sense in so far that the routing table for both DHTs will be of a different size and thus you'll end up with different nodes towards the end of a FIND_PEERS lookup, even if they're dualstack nodes.<br /><br />Thus the nodes in the IPv6-FIND_PEERS lookup are rather unlikely to have a reasonable amount of v4 peers stored and vice versa.<br /><br />Another point is that a dualstack node will do 2 lookups in parallel, one for each routing table, so there's no need for supplying both datasets over both routing tables.<br /><br /><br /><br />But i'm not sure if mandating it is really necessary.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p678" class="blockpost rowodd">
	<h2><span><span class="conr">#7&nbsp;</span><a href="viewtopic.php?pid=678#p678">2009-10-15 18:34:10</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p><strong>1. Same id in both DHTs</strong><br /><br />I agree with arvid's <em>SHOULD</em>, since while using different ids doesn't break anything, it makes things uselessly messy and potentially less efficient. If that's okay, I'll take the most of arvid's prose (I'll tone down the end, since I'm not convinced about the efficiency argument -- see about DHT congruence below).<br /><br /><strong>2. Sending <em>nodes</em> even when sending <em>values</em></strong><br /><br />Adopted.<br /><br /><strong>2. Flags vs. want</strong><br /><br />I'm a little insecure on the issue.&nbsp; On the one hand, flexibility is good.&nbsp; On the other hand, flexibility is bad, since it potentially breaks interoperability by creating gazillions of incompatible variants.<br /><br />Clearly, there's a trade-off there: I'm looking for a syntax that does not prevent flexibility should we actually need it, but does not encourage everyone and his brother to create Yet Another Flag.<br /><br />A string of single-octet flags seems like the right compromise to me; The8472 would appear to have tastes that are more on the flexibility side.&nbsp; Is this a bikeshed argument we're having?<br /><br /><strong>3. Receiving IPv6 values over IPv4 and vice-versa</strong><br /><br />You're only likely to meet an IPv4 node that can provide you with IPv6 values that are of interest to you if the two DHTs are mostly congruent, i.e. if the set of IPv4 nodes roughly coincides with the set of IPv6 nodes.&nbsp; This is extremely unlikely to happen in practice.<br /><br />Consider that in the near future, most nodes will have firewalled IPv4 (look up <em>carrier-grade NAT</em> if you're not convinced), and hence will not be participating in the IPv4 DHT; however, many of those nodes will have full IPv6 connectivity (Teredo or 6to4 are fine, you don't need native connectivity in order to accept unsolicited packets).<br /><br />Hence, my feeling is that allowing both IPv4 and IPv6 values adds complexity uselessly.&nbsp; I have no objection to adding such an extension, however, but I'd like to suggest that it should be optional -- meaning that (1) it is possible to request both sets of nodes, but only the matching set of values; (2) by default, only the matching values are sent; and (3) a node is free to ignore the requestor and only send the matching values.<br /><br /><strong>4. Requesting both sets of nodes on each <em>find_nodes</em></strong><br /><br />This is only useful if you assume that the two DHTs are congruent, which I claim is very unlikely.&nbsp; I will tone down the language, though.<br /><br /><strong>5. Merging <em>values</em> and <em>values6</em></strong><br /><br />Good point.&nbsp; Adopted.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p681" class="blockpost roweven">
	<h2><span><span class="conr">#8&nbsp;</span><a href="viewtopic.php?pid=681#p681">2009-10-15 18:53:05</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>if you post a patch against <a href="http://www.bittorrent.org/beps/bep_0032.rst" rel="nofollow">http://www.bittorrent.org/beps/bep_0032.rst</a> I can apply it to the published version.<br /><br />If you use the same node ID for both networks, and you're one of the closest nodes to a certain info-hash on the IPv4 network, you're quite likely to be one of the closest nodes on the IPv6 network as well (assuming the IPv6 network is smaller). In which case peers would announce to you over both networks.<br /><br />If a client doesn't support the DHT over IPv6, it can at least ask for IPv6 peers from the DHT easily (if you can control which address family you receive in a get_peers response).</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p682" class="blockpost rowodd">
	<h2><span><span class="conr">#9&nbsp;</span><a href="viewtopic.php?pid=682#p682">2009-10-15 19:30:37</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Patch:<br /><br />&nbsp; &nbsp;<a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6-1-2.patch" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -1-2.patch</a><br /><br />Full text:<br /><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.html" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -ipv6.html</a><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.rst" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; t-ipv6.rst</a></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p683" class="blockpost roweven">
	<h2><span><span class="conr">#10&nbsp;</span><a href="viewtopic.php?pid=683#p683">2009-10-15 19:33:54</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>If a client doesn't support the DHT over IPv6, it can at least ask for IPv6 peers from the DHT easily (if you can control which address family you receive in a get_peers response).</p></div></blockquote><p>Only if the two DHTs are congruent.&nbsp; If they are mostly disjoint (which, as I've argued before, is most likely to be the case), then not only an IPv4 node cannot find the right nodes for the IPv6 information -- it most likely cannot even reach them.<br /><br />FWIW, the new version makes the behaviour of &quot;values&quot; a should rather than a must (except in one case), and mandates that all nodes must be able to parse hybrid lists.&nbsp; Which should be good enough to switch to a different behaviour in the future if it is found desirable (which I doubt).</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p684" class="blockpost rowodd">
	<h2><span><span class="conr">#11&nbsp;</span><a href="viewtopic.php?pid=684#p684">2009-10-15 19:45:29</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>The extension described in this document also solves a long-standing issue with the protocol defined in BEP-5. The presence of contact information in the reply is no longer governed by the presence of a &quot;values&quot; key; this avoids the well-known problem of contact information being masked by peer information. While this is an incompatible change, it is believed to be properly handled by all deployed implementations</p></div></blockquote><p>I don't think this belongs in this BEP. It should be fixed in BEP-5 (I've posted a proposed change in that thread)</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p685" class="blockpost roweven">
	<h2><span><span class="conr">#12&nbsp;</span><a href="viewtopic.php?pid=685#p685">2009-10-15 19:54:40</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>Only if the two DHTs are congruent.&nbsp; If they are mostly disjoint (which, as I've argued before, is most likely to be the case), then not only an IPv4 node cannot find the right nodes for the IPv6 information -- it most likely cannot even reach them.</p></div></blockquote><p>I still don't see the argument for disallowing asking for IPv6 peers from an IPv4 node.<br /><br />There's a relatively high probability that at one of the 8 nodes that peers announce to will be a dual stack node. And I believe this probability will increase as windows vista and windows 7 becomes more popular. Starting in vista, teredo is installed and enabled by default. uTorrent and libtorrent both make use of teredo when it's enabled (and I believe most well maintained clients would, simply by supporting IPv6).<br /><br /></p><blockquote><div class="incqbox"><p>FWIW, the new version makes the behaviour of &quot;values&quot; a should rather than a must (except in one case), and mandates that all nodes must be able to parse hybrid lists.&nbsp; Which should be good enough to switch to a different behaviour in the future if it is found desirable (which I doubt).</p></div></blockquote><p>I think it's an over-statement to claim that something that an old client doesn't understand is a breakage of compatibility. With the same reasoning, introducing the &quot;want&quot; key would break compatibility.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p686" class="blockpost rowodd">
	<h2><span><span class="conr">#13&nbsp;</span><a href="viewtopic.php?pid=686#p686">2009-10-16 02:35:58</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Considering that for the timing being most IPv6 nodes will actually be dual stack nodes the IPv6 DHT will mostly be a subset of the IPv4 one. Thus congruence is not an issue, just node density, i.e. an ipv4 lookup mostly terminating with more dualstack nodes closer to the key than the IPv6 lookup simply because there are more IPv4 nodes.<br /><br />I.e. the final set of each lookup will be closer to the key for IPv4 than it is for IPv6.<br /><br /><br />But the path towards your own ID (i.e. bootstrapping) has a decent chance of seeing dualstack nodes in both routing tables as the bucket spacing should is always the same (i.e. root bucket covers 50%, 2nd bucket covers 25% of the keyspace etc. etc.)</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p687" class="blockpost roweven">
	<h2><span><span class="conr">#14&nbsp;</span><a href="viewtopic.php?pid=687#p687">2009-10-16 13:28:24</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89602">arvid</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>I would suggest changing all mentions of &quot;double stack&quot; to &quot;dual stack&quot;.<br /><br />I also want to bring up the feasibility of transition &quot;values&quot; to a single string rather than a list. I realized I initially was opposed to introducing &quot;values6&quot;, but I think there is some merit in turning the peer-list into a compact representation to save space. Currently, with both &quot;values&quot; and &quot;nodes&quot; in a get_peers response, it's not unlikely to exceed the MTU. using a list instead of a compact list wastes 2 bytes for every 6 bytes returned (in the IPv4 case) and 3 bytes for every 18 bytes stored for IPv6.<br /><br />For IPv4 it would mean being able to fit 33% more peers.<br /><br />It could be made backwards compatible by specifying support for the compact format via flags.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p688" class="blockpost rowodd">
	<h2><span><span class="conr">#15&nbsp;</span><a href="viewtopic.php?pid=688#p688">2009-10-16 19:45:48</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Since we're talking about IPv6 here we should also take the less-than-1500 MTUs due to IPv6 transition mechanisms into account.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p690" class="blockpost roweven">
	<h2><span><span class="conr">#16&nbsp;</span><a href="viewtopic.php?pid=690#p690">2009-10-17 07:09:00</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>I still claim that there is no usage scenario for returning both sets of values:<br /><br />1. Single stack nodes don't need both sets of values.<br />2. Double stack nodes perform searches in both DHTs in parallel, hence returning both sets of values will return redundant information.<br /><br />So the only usage scenario is the one brought up by arvid, that of a double-stack node that hasn't implemented support for the IPv6 DHT, but does support parsing of IPv6 values in replies from the IPv4 DHT.&nbsp; This is a very particular case, and I'm not particularly keen on complicating the protocol for this case.<br /><br />(Additionally, The8475, when you argue that the IPv6 DHT is congruent to the IPv4 DHT, just smaller, you're assuming that IPv4 nodes are not behind NAT.&nbsp; I hence claim that even that last scenario is not likely to work in practice.)<br /><br />If you really insist on handling this case, please define an extension to <em>optionally</em> allow returning of both sets of values that would suit you.<br /><br />Other than that, you're right about maximum packet size; I'll add some suitable language.&nbsp; You're also right about dual stack, I'll change it throughout.<br /><br />Finally, I'm not really willing to change values to compact form, being compatible with both adds complexity while only saving some 100 bytes at most.&nbsp; I'm willing to reconsider if you provide a full specification of how to handle backwards compatibility.</p>
					<p class="postedit"><em>Last edited by jch (2009-10-17 09:47:47)</em></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p691" class="blockpost rowodd">
	<h2><span><span class="conr">#17&nbsp;</span><a href="viewtopic.php?pid=691#p691">2009-10-17 09:46:35</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Diff:<br /><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6-2-3.patch" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -2-3.patch</a><br /><br />Full text:<br /><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.rst" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; t-ipv6.rst</a><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.html" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -ipv6.html</a><br /><br />The good news is that we appear to be agreeing on single-stack operation, both for IPv4 and for IPv6.&nbsp; We still need to agree on interaction between the two stacks:<br /><br />&nbsp; * name and syntax of the &quot;want&quot;/&quot;flags&quot; parameter;<br />&nbsp; * whether to allow mixed values.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p692" class="blockpost roweven">
	<h2><span><span class="conr">#18&nbsp;</span><a href="viewtopic.php?pid=692#p692">2009-10-17 12:17:28</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>I think parsing both ipv4 and ipv6 values is trivial if we use non-compact lists and as such we don't have to mandate that nodes return only v4 or v6 addresses. It's merely a best-practice thing to do considering that clients have to be able to decode both anyway. I bet there'll be some stray packets intended for v4 in the v6 DHT and vice versa due to sub-optimal implementations anyway, so clients will have to deal with it on encoding.<br /><br /><br />As for the want/flags. I prefer a bencoded list of short strings as flags over some &quot;new&quot; encoding scheme that's nowhere else used in bittorrent for aesthetic and flexibility reasons. Especially considering that request packets are naturally rather small and that those flags are generally optional since the default behavior without such flags still should be reasonable (otherwise our spec would be shoddy).<br /><br /><br />And another serious issue came to mind: Multihomed IPv6 hosts. This is a serious problem with nodes that have native v6/6to4/tunnels and ipv4/teredo. Most routing configurations will prefer native/6to4/tunnels by default but will use teredo instead if contacting another teredo node. This means that different DHT nodes will see different IPs associated with the same ID, which can generally lead to conflicts in the routing table management.<br /><br />So i would suggest that DHTv6 ports should be explicitly bound to a single public IPv6 address, a non-teredo one if possible.<br /><br />I.e. binding to <strong>[::]</strong> should be discouraged.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p693" class="blockpost rowodd">
	<h2><span><span class="conr">#19&nbsp;</span><a href="viewtopic.php?pid=693#p693">2009-10-17 14:11:17</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>I think parsing both ipv4 and ipv6 values is trivial if we use non-compact lists and as such we don't have to mandate that nodes return only v4 or v6 addresses.</p></div></blockquote><p>Check the section about &quot;values&quot; -- that's already the case.<br /><br /></p><blockquote><div class="incqbox"><p>As for the want/flags. I prefer a bencoded list of short strings as flags over some &quot;new&quot; encoding scheme that's nowhere else used in bittorrent for aesthetic and flexibility reasons.</p></div></blockquote><p>Okay, I'll switch to such a list, I don't care that much.&nbsp; &quot;want&quot; or &quot;flags&quot;?&nbsp; (I prefer &quot;want&quot;, but don't care much.)<br /><br /></p><blockquote><div class="incqbox"><p>I.e. binding to :: should be discouraged.</p></div></blockquote><p>Could you suggest some suitable prose?<br /><br />Additionally, we should mention something about the <strong>PORT</strong> message.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p694" class="blockpost roweven">
	<h2><span><span class="conr">#20&nbsp;</span><a href="viewtopic.php?pid=694#p694">2009-10-17 20:42:29</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><h4>jch wrote:</h4><blockquote><div class="incqbox"><p>I think parsing both ipv4 and ipv6 values is trivial if we use non-compact lists and as such we don't have to mandate that nodes return only v4 or v6 addresses.</p></div></blockquote><p>Check the section about &quot;values&quot; -- that's already the case.</p></div></blockquote><p>Excellent.<br /><br /></p><blockquote><div class="incqbox"><h4>jch wrote:</h4><blockquote><div class="incqbox"><p>As for the want/flags. I prefer a bencoded list of short strings as flags over some &quot;new&quot; encoding scheme that's nowhere else used in bittorrent for aesthetic and flexibility reasons.</p></div></blockquote><p>Okay, I'll switch to such a list, I don't care that much.&nbsp; &quot;want&quot; or &quot;flags&quot;?&nbsp; (I prefer &quot;want&quot;, but don't care much.)</p></div></blockquote><p>And i'm leaning towards &quot;flags&quot;, but it's just an issue of semantics, not really important.<br /><br /></p><blockquote><div class="incqbox"><h4>jch wrote:</h4><p>Could you suggest some suitable prose?</p></div></blockquote><p>let's see...<br /><br /><br /><strong>IPv6 address binding</strong><br /><br />The IPv6 DHT should use a socket bound to one of the host's global unicast IPv6 addresses instead of the &quot;unspecified address&quot; (::/128).<br />When selecting to which address to bind the client should avoid teredo addresses (2001:0000::/32) if other global unicast addresses are available.<br /><br />Rationale: The DHT relies on the publicly visible IP address of each node to be transitive among all contacts to maintain its oldest-alive lists in the routing tables and to match replies to requests. Without binding this transitivity can be violated as the operating system may chose different source addresses for outgoing packets based on the destination address, routes and prefix policies.<br /><br /><br /><br /><br /><br /></p><blockquote><div class="incqbox"><h4>jch wrote:</h4><p>Additionally, we should mention something about the <strong>PORT</strong> message.</p></div></blockquote><p>Mhhh, peers supporting LTEP also exchange their ipv4 and/or ipv6 addresses. So the port can be assumed to be valid for both if they do. Of course that has to be verified in case the BT implementation is ipv6-aware and the DHT isn't.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p704" class="blockpost rowodd">
	<h2><span><span class="conr">#21&nbsp;</span><a href="viewtopic.php?pid=704#p704">2009-10-19 11:02:27</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>When selecting to which address to bind the client should avoid teredo addresses (2001:0000::/32) if other global unicast addresses are available.</p></div></blockquote><p>I'll omit this bit, since I happen to disagree with it.&nbsp; Let's leave this at the implementation's discretion.<br /><br /></p><blockquote><div class="incqbox"><p>Mhhh, peers supporting LTEP also exchange their ipv4 and/or ipv6 addresses. So the port can be assumed to be valid for both if they do. Of course that has to be verified in case the BT implementation is ipv6-aware and the DHT isn't.</p></div></blockquote><p>And that's the very reason why I'm leaning towards mandating that the PORT message is only valid for the address family it was sent over, but that double-stack implementations are strongly encouraged to run both DHTs on the same port number.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p705" class="blockpost roweven">
	<h2><span><span class="conr">#22&nbsp;</span><a href="viewtopic.php?pid=705#p705">2009-10-19 13:18:38</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><h4>jch wrote:</h4><blockquote><div class="incqbox"><p>When selecting to which address to bind the client should avoid teredo addresses (2001:0000::/32) if other global unicast addresses are available.</p></div></blockquote><p>I'll omit this bit, since I happen to disagree with it.&nbsp; Let's leave this at the implementation's discretion.</p></div></blockquote><p>Decisions should be justified and not unilateral, so can you provide any reason for that? Teredo has a lower MTU (more encapsulation layers) and is potentially less reachable due to NAT traversal than other IPv6 mechanisms.<br /><br />Microsoft even ranks teredo dead last, in its prefix policies.<br /><br /><br /></p><blockquote><div class="incqbox"><h4>jch wrote:</h4><blockquote><div class="incqbox"><p>Mhhh, peers supporting LTEP also exchange their ipv4 and/or ipv6 addresses. So the port can be assumed to be valid for both if they do. Of course that has to be verified in case the BT implementation is ipv6-aware and the DHT isn't.</p></div></blockquote><p>And that's the very reason why I'm leaning towards mandating that the PORT message is only valid for the address family it was sent over, but that double-stack implementations are strongly encouraged to run both DHTs on the same port number.</p></div></blockquote><p>Just have the DHT implementation send 2 pings. one to the IPv4, one to the IPv6. The replies (if any) will automatically add them to the routing tables.<br /><br />I don't see a reason why they should run on different ports, considering that they operate in tandem. For the sake of simplicity and codifying reasonable assumptions i would say that we could put that into the spec.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p712" class="blockpost rowodd">
	<h2><span><span class="conr">#23&nbsp;</span><a href="viewtopic.php?pid=712#p712">2009-10-29 11:48:01</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>Full text:<br /><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.html" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -ipv6.html</a><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6.rst" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; t-ipv6.rst</a><br /><br />Patch since the last version published on <a href="http://www.bittorrent.org" rel="nofollow">www.bittorrent.org</a>:<br /><br />&nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6-2-4.patch" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -2-4.patch</a><br /><br />Patch since the previous version:<br /><br />&nbsp; &nbsp; <a href="http://www.pps.jussieu.fr/~jch/software/bittorrent/bep-dht-ipv6-3-4.patch" rel="nofollow">http://www.pps.jussieu.fr/~jch/software &hellip; -3-4.patch</a><br /><br />--Juliusz</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p713" class="blockpost roweven">
	<h2><span><span class="conr">#24&nbsp;</span><a href="viewtopic.php?pid=713#p713">2009-10-29 11:50:39</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90580">jch</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>&gt; can you provide any reason for that? Teredo has a lower MTU (more encapsulation layers) and is potentially less reachable due to NAT traversal than other IPv6 mechanisms.<br /><br />Teredo is potentially more efficient than native, especially when speaking to other Teredo nodes.&nbsp; (Read the spec, it's a very clever protocol.)<br /><br />However, Teredo tends to be brittle, which is why I've finally decided to put your suggestion in the draft.&nbsp; Let me know if you're happy with the rationale.<br /><br />As to the PORT message -- I'm still not convinced.&nbsp; Let me know what you think of the rationale I've put in the draft.<br /><br />--Juliusz</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p715" class="blockpost rowodd">
	<h2><span><span class="conr">#25&nbsp;</span><a href="viewtopic.php?pid=715#p715">2009-10-29 18:55:48</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: BEP 32 IPv6 support for the DHT</h3>
				<div class="postmsg">
					<p>port message: this might be an issue with source address binding. but i can't think of a good fix that doesn't use ltep.<br /><br />&quot;find_nodes and get_peers&quot; chapter: needs a fix regarding the want flags. they're not bytes anymore.<br /><br /></p><blockquote><div class="incqbox"><p>Teredo is potentially more efficient than native, especially when speaking to other Teredo nodes.</p></div></blockquote><p>the same could said about 6to4, with less overhead. Although it's less widespread due to all those nat routers.<br /><br />Anyway, i'm happy with that part as it is.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div class="postlinksb">
	<div class="inbox">
		<p class="postlink conr">&nbsp;</p>
		<p class="pagelink conl">Pages: <strong>1</strong>&nbsp;<a href="viewtopic.php?id=114&amp;p=2">2</a></p>
		<ul><li><a href="index.php">Index</a></li><li>&nbsp;&raquo;&nbsp;<a href="viewforum.php?id=25">BEPs</a></li><li>&nbsp;&raquo;&nbsp;BEP 32 IPv6 support for the DHT</li></ul>
		<div class="clearer"></div>
	</div>
</div>

<div id="brdfooter" class="block">
	<h2><span>Board footer</span></h2>
	<div class="box">
		<div class="inbox">

			<div class="conl">
				<form id="qjump" method="get" action="viewforum.php">
					<div><label>Jump to
					<br /><select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)">
						<optgroup label="BitTorrent">
							<option value="26">Announcements</option>
							<option value="25" selected="selected">BEPs</option>
							<option value="29">BEP process</option>
							<option value="27">General</option>
							<option value="33">Research Tools</option>
							<option value="32">Cooperation between BitTorrent and ISPs</option>
							<option value="30">Attacks against BitTorrent</option>
							<option value="28">Feature Requests, Found Bugs &gt;&gt;&gt;</option>
					</optgroup>
					</select>
					<input type="submit" value=" Go " accesskey="g" />
					</label></div>
				</form>
			</div>
			<p class="conr">Powered by <a href="http://fluxbb.org/">FluxBB</a></p>
			<div class="clearer"></div>
		</div>
	</div>
</div>

</div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-116155-1";
_udn = "utorrent.com";
urchinTracker();
</script>

</body>
</html>
