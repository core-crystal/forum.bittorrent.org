<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>forum.bittorrent.org / Discussion of BEP 15: UDP Tracker Protocol</title>
<link rel="stylesheet" type="text/css" href="style/Kontrast.css" />
</head>
<body>

<div id="punwrap">
<div id="punviewtopic" class="pun">

<div id="brdheader" class="block">
	<div class="box">
		<div id="brdtitle" class="inbox">
			<h1><span>forum.bittorrent.org</span></h1>
			<p><span>BitTorrent.org community</span></p>
		</div>
		<div id="brdmenu" class="inbox">
			<ul>
				<li id="navindex"><a href="index.php">Index</a></li>
				<li id="navextra1"><a href="http://forum.bittorrent.org">Homepage</a></li>
				<li id="navextra2"><a href="irc://irc.freenode.net/bittorrent">IRC</a></li>
				<li id="navuserlist"><a href="userlist.php">User list</a></li>
				<li id="navrules"><a href="misc.php?action=rules">Rules</a></li>
				<li id="navsearch"><a href="search.php">Search</a></li>
				<li id="navregister"><a href="register.php">Register</a></li>
				<li id="navlogin"><a href="login.php">Login</a></li>
			</ul>
		</div>
		<div id="brdwelcome" class="inbox">
			<p>You are not logged in.</p>
		</div>
	</div>
</div>

<div id="announce" class="block">
	<h2><span>Announcement</span></h2>
	<div class="box">
		<div class="inbox">
			<div>Posting about any illegal sharing of copyrighted content is strictly forbidden.</div>
		</div>
	</div>
</div>

<div class="linkst">
	<div class="inbox">
		<p class="pagelink conl">Pages: <strong>1</strong>&nbsp;<a href="viewtopic.php?id=18&amp;p=2">2</a></p>
		<p class="postlink conr">&nbsp;</p>
		<ul><li><a href="index.php">Index</a></li><li>&nbsp;&raquo;&nbsp;<a href="viewforum.php?id=25">BEPs</a></li><li>&nbsp;&raquo;&nbsp;Discussion of BEP 15: UDP Tracker Protocol</li></ul>
		<div class="clearer"></div>
	</div>
</div>

<div id="p45" class="blockpost rowodd firstpost">
	<h2><span><span class="conr">#1&nbsp;</span><a href="viewtopic.php?pid=45#p45">2008-03-04 21:05:20</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3>Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Lighter-weight version of Bram's tracker protocol.&nbsp; See Olaf's proposal<br /><br />&nbsp; <a href="http://www.bittorrent.org/beps/bep_0015.html" rel="nofollow">http://www.bittorrent.org/beps/bep_0015.html</a><br /><br />Bram Cohen's HTTP over TCP-based tracker protocol is described in<br /><br />&nbsp; <a href="http://www.bittorrent.org/beps/bep_0003.html" rel="nofollow">http://www.bittorrent.org/beps/bep_0003.html</a></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p159" class="blockpost roweven">
	<h2><span><span class="conr">#2&nbsp;</span><a href="viewtopic.php?pid=159#p159">2008-04-23 08:01:17</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Given that there have been no comments (until now), what's the next step? Is it the review?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p160" class="blockpost rowodd">
	<h2><span><span class="conr">#3&nbsp;</span><a href="viewtopic.php?pid=160#p160">2008-04-23 11:36:28</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Note that there also is an IPv6 extension to this protocol (just like for the TCP announces), see <a href="http://opentracker.blog.h3q.com/?p=38" rel="nofollow">http://opentracker.blog.h3q.com/?p=38</a><br /><br /><br />And i think we should pat the protocol for extensibility, especially when it comes to the handshake messages. E.g. we could say that the handshake messages must not be extended by additional bytes (except in a well-coordinated manner) as those will be required for future capability-handshaking.</p>
					<p class="postedit"><em>Last edited by The 8472 (2008-04-23 12:01:12)</em></p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p163" class="blockpost roweven">
	<h2><span><span class="conr">#4&nbsp;</span><a href="viewtopic.php?pid=163#p163">2008-04-24 14:09:01</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>Note that there also is an IPv6 extension to this protocol (just like for the TCP announces), see <a href="http://opentracker.blog.h3q.com/?p=38" rel="nofollow">http://opentracker.blog.h3q.com/?p=38</a></p></div></blockquote><p>I'm aware of that one. In the BEP I also mentioned IPv6.<br /></p><blockquote><div class="incqbox"><p>And i think we should pat the protocol for extensibility, especially when it comes to the handshake messages. E.g. we could say that the handshake messages must not be extended by additional bytes (except in a well-coordinated manner) as those will be required for future capability-handshaking.</p></div></blockquote><p>That's what I was thinking about. It's also mentioned in the BEP already, right?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p164" class="blockpost rowodd">
	<h2><span><span class="conr">#5&nbsp;</span><a href="viewtopic.php?pid=164#p164">2008-04-24 16:11:35</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>Extension bits or a version field are not included. Clients and trackers should not assume packets to be of a certain size. This way, additional fields can be added without breaking compatibility.</p></div></blockquote><p>not really what i meant. It sounds as if people were free to add new fields, i'm saying we should explicitly prohibit it and only say that developers should anticipate future, standardized use of the additional bytes.</p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p165" class="blockpost roweven">
	<h2><span><span class="conr">#6&nbsp;</span><a href="viewtopic.php?pid=165#p165">2008-04-25 12:06:38</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>I agree, extensions to this protocol should not be done without standardization.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p298" class="blockpost rowodd">
	<h2><span><span class="conr">#7&nbsp;</span><a href="viewtopic.php?pid=298#p298">2008-07-28 17:16:21</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89918">jlouis</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>As far as I can read, this protocol lacks the description of how the client knows that UDP tracking is being used. It looks like the announce-url will contain udp://, but doing that blindly excludes all clients not supporting the extension. Hence, I assume one uses the multi-tracker extension with UDP in the first tier or something such. And then clients can choose to ignore protocols they don't know about.<br /><br />I have not found anything else yet when trying to implement it straight from the BEP.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p299" class="blockpost roweven">
	<h2><span><span class="conr">#8&nbsp;</span><a href="viewtopic.php?pid=299#p299">2008-07-29 02:21:29</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>multitracker + udp:// is one way, the one mentioned here is another: <a href="http://opentracker.blog.h3q.com/" rel="nofollow">http://opentracker.blog.h3q.com/</a></p>
					<p class="postedit"><em>Last edited by The 8472 (2008-07-29 02:24:17)</em></p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p300" class="blockpost rowodd">
	<h2><span><span class="conr">#9&nbsp;</span><a href="viewtopic.php?pid=300#p300">2008-07-29 08:08:45</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89918">jlouis</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>So multitracker + udp:// would be a teller-algorithm (we tell the client how to act) whereas the auto-udp feature is a learner-algorithm (The client learns what the tracker supports). For the OSI network heads, it is the difference in which Layer 2 protocols tend to work compared to how Layer 3 protocols tend to work.<br /><br />I don't particulary like the auto-udp solution. It has the advantage of backwards adaptation, also for existing .torrent files. But it has everything else against it. It is a pretty ugly solution, because it works in a subtle way. It has no chance of sustaining further extension without considerable effort. And it seems (to me) to require quite an amount of code to solve, where its contender (multitracker + udp://) requires almost none.<br /><br />The only sensible solution I've been able to cook up in a couple of minutes thinking is that you start with HTTP and then try to upgrade such a connection to UDP. When you learn that the tracker supports UDP, you track this in a disk-persistent table so you can get the upper hand in subsequent connection attempts. If the tracker suddenly can't support UDP anymore, you will have to downgrade him to HTTP again. But the exception is that if he is not answering HTTP either, you don't change anything because he is dead.<br /><br />You could start in UDP mode, but that incurs overhead should you learn he doesn't support it.<br /><br />If you have an easier way to obtain and track the information, please let us know. It ought to be part of the BEP then.<br /><br />For the multi-tracker solution it is much easier: just filter out any kind of protocol connectivity you don't understand. If that is made a requirement of the multi-tracker extension (BEP 12) you are practically done. The disadvantage is, however, that you will need to regenerate .torrent files and all old torrent files will keep on using HTTP tracking. It doesn't look like infohashes are hurt, which is good.<br /><br />A third option, which I don't think is worth pursuing, is to have the tracker tell the peer to upgrade in the bencoded HTTP response. But it might be fair to have in mind because it can mitigate the backwards adaptation problem.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p301" class="blockpost roweven">
	<h2><span><span class="conr">#10&nbsp;</span><a href="viewtopic.php?pid=301#p301">2008-07-29 11:14:49</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89618">The 8472</a></strong></dt>
					<dd class="usertitle"><strong>Azureus Developer</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>we (Az) are using autoudp in addition to udp:// support, both work like a charm. I think they supplement each other quite well. udp:// allows you to specify udp-only trackers or a udp tracker running on a separate port, whereas auto probing works transparently to the user and provides a higher adoption rate.<br /><br />And yes, remembering which tracker supports what is part of the solution.</p>
					<p class="postedit"><em>Last edited by The 8472 (2008-07-29 11:16:56)</em></p>
				</div>
				<div class="postsignature"><hr />Az dev</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p469" class="blockpost rowodd">
	<h2><span><span class="conr">#11&nbsp;</span><a href="viewtopic.php?pid=469#p469">2008-09-08 17:27:15</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>A client can use a connection ID until one minute after it has received it. Trackers should accept the connection ID until two minutes after it has been send.</p></div></blockquote><p>Why?&nbsp; If the nonce (connection ID) is sufficiently unguessable then it could be used for quite some time.... forever?&nbsp; &nbsp;The tracker could return a salted hash of the requestor's IP address.&nbsp; State isn't an issue the tracker can use the same salt across many (all?) peers. What is the threat model?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p472" class="blockpost roweven">
	<h2><span><span class="conr">#12&nbsp;</span><a href="viewtopic.php?pid=472#p472">2008-09-09 03:34:04</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>The reason for that limit was not a threat issue. It was done in case a tracker implementation wanted to use something else than a salted hash, like a more traditional connection tracking approach. However, I guess there's no reason not to use the salted hash approach.<br />One issue with 'forever' I can think of now is related to dynamic host addresses. If the connection ID never expires, a client is able to spoof connections from every address he has had access to in the past.<br /><br />The one minute limit allows a client to do multiple announces in a burst. If a higher limit is desired, it should be at least a few hours.<br /><br />Or each non-connect response could also include a connection ID. Then a connection ID could be valid for say 4 hours and the tracker could refresh the salt every 4 hours and still accept IDs based on the old salt.<br />That way you avoid the two initial packets most of the time without the disadvantage of a permanently valid connection ID.</p>
					<p class="postedit"><em>Last edited by Olaf van der Spek (2008-09-09 03:48:09)</em></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p473" class="blockpost rowodd">
	<h2><span><span class="conr">#13&nbsp;</span><a href="viewtopic.php?pid=473#p473">2008-09-09 03:36:05</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>multitracker + udp:// is one way,</p></div></blockquote><p>Many private trackers use a key in the path portion of the URL. In that case, UDP can't be used for announce, but it might still be possible to use it for scrape, as the key isn't required in that case.<br />That can't be done with multitracker + udp://</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p479" class="blockpost roweven">
	<h2><span><span class="conr">#14&nbsp;</span><a href="viewtopic.php?pid=479#p479">2008-09-11 06:52:53</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90021">erdgeist</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Nice to see, that finally the tracker protocol discussion seems to get running. I felt a little alone when proposing my ideas half a year ago.<br /><br />First I'd like to point out that &quot;udp://&quot; looks like describing the wrong layer. If jlouis points out, that he does not like the auto udp discovery, he steps into that trap. The scheme identifier does NOT choose the transport layer protocol but the application layer protocol. There are well working examples, e.g. DNS, were udp and tcp as transports can be used to serve the same application layer protocol. Problem is, there is no well developed http over udp spec.<br /><br />The udp tracker protocol was proposed to ease the load on trackers. Considering that the bittorrent tcp tracker protocol stacks up http over tcp forcing tracker operators to invest in machines that handles tcp states in kernel, socket states in applications while waiting for an http-request to complete, offering this lightweight alternative is a sane thing to do. And where DNS resorts to tcp if udp does not provide enough space, using udp requests to the tracker in order to save bandwidth and accelerate tracker respones and only defaulting to tcp+http where that fails, seems reasonable to me.<br /><br />Also up for discussion is my proposal to keep v6 and v4 clouds seperated. Thus a client needs to announce a torrent for each internet layer protocol it understands. I laid out this decision's rationale in <a href="http://opentracker.blog.h3q.com/?p=38" rel="nofollow">http://opentracker.blog.h3q.com/?p=38</a> and would like to have my ideas peer reviewed than just letting it rot in my brain in a dark and wet chamber.</p>
					<p class="postedit"><em>Last edited by erdgeist (2008-09-11 09:54:15)</em></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p480" class="blockpost rowodd">
	<h2><span><span class="conr">#15&nbsp;</span><a href="viewtopic.php?pid=480#p480">2008-09-11 10:00:09</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>First I'd like to point out that &quot;upd://&quot; looks like describing the wrong layer.</p></div></blockquote><p>That applies to &quot;http://&quot; as well in this context. There's a BT announce protocol on top of that too.<br /><br /></p><blockquote><div class="incqbox"><p>Also up for discussion is my proposal to keep v6 and v4 clouds seperated.</p></div></blockquote><p>I think it's best to get the v4 UDP protocol implemented in clients before trying to solve the entire v6 discussion.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p483" class="blockpost roweven">
	<h2><span><span class="conr">#16&nbsp;</span><a href="viewtopic.php?pid=483#p483">2008-09-11 10:51:24</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=30435">bram</a></strong></dt>
					<dd class="usertitle"><strong>Administrator</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>I'm primarily interested in this as documentation and codifying of what appears to be a somewhat widely deployed de facto standard. Further modification and extension as part of this process is unlikely to be productive.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p484" class="blockpost rowodd">
	<h2><span><span class="conr">#17&nbsp;</span><a href="viewtopic.php?pid=484#p484">2008-09-11 10:57:10</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Dave raised an interesting point regarding the connection IDs. I think it's possible to improve that aspect.<br /><br />Is there anything else you'd like to see improved in the documentation, besides what Dave already suggested (via email)?</p>
					<p class="postedit"><em>Last edited by Olaf van der Spek (2008-09-11 10:57:29)</em></p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p485" class="blockpost roweven">
	<h2><span><span class="conr">#18&nbsp;</span><a href="viewtopic.php?pid=485#p485">2008-09-11 13:46:15</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>From the BEP:<br /><br /></p><blockquote><div class="incqbox"><p>Do not expect packets to be exactly of a certain size. Future extensions could increase the size of packets.</p></div></blockquote><p>If I understand the writing correctly (reading a bit between the lines), extensibility is supported by changing the size of the payload in the UDP datagram in the handshake.&nbsp; This may lead to packet changes elsewhere.<br /><br />This is a bit odd.&nbsp; &nbsp;To disambiguate when multiple extensions are present, the first thing we would add is some other extension mechanism (e.g., bitfield, extension headers, bencoded key-value pairs).</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p486" class="blockpost rowodd">
	<h2><span><span class="conr">#19&nbsp;</span><a href="viewtopic.php?pid=486#p486">2008-09-11 14:24:32</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Like The 8472 already said, extensions are supposed to be introduced via these BEPs in a coordinated manner, not ad hoc.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p487" class="blockpost roweven">
	<h2><span><span class="conr">#20&nbsp;</span><a href="viewtopic.php?pid=487#p487">2008-09-11 14:53:30</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>we (Az) are using autoudp in addition to udp:// support,</p></div></blockquote><p>The overhead and latency introduced by autoudp for non-udp trackers annoys me, but the overhead and latency are not large.&nbsp; &nbsp;I personally would do as jlouis suggests and try HTTP first, but there is an easy way to solve this impasse:&nbsp; leave the order up to the client implementor. <br /><br />Auto-udp requires no new messages and thus could be specified as an implementation suggestion to ease adoption.<br /> <br />There should be some explicit way of specifying UDP support, udp:// + multitracker appears satisfactory.&nbsp; <br /><br />Olaf, could you describe both in the BEP?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p489" class="blockpost rowodd">
	<h2><span><span class="conr">#21&nbsp;</span><a href="viewtopic.php?pid=489#p489">2008-09-11 15:19:14</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89609">Olaf van der Spek</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>&gt; Olaf, could you describe both in the BEP?<br /><br />Sure. <br />The overhead of auto-UDP should be 300 bytes in the worst case. Is that a problem? <img src="img/smilies/wink.png" width="15" height="15" alt="wink" /><br />The latency could be as low as 3 seconds. I don't think that's really an issue.<br /><br />What about the connection ID validity?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p491" class="blockpost roweven">
	<h2><span><span class="conr">#22&nbsp;</span><a href="viewtopic.php?pid=491#p491">2008-09-11 18:09:45</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=90021">erdgeist</a></strong></dt>
					<dd class="usertitle"><strong>Member</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>Some numbers from denis.stalker.h3q.com and piratebay trackers to give you a clue about how well understood the current udp protocol spec is: the rate of udp connect messages without the initial 0x041727101980 is around 40%. Only half of the clients return with announces using the correct connection id. Some return 0x041727101980, some return seemingly random values. The bad news is, that we can not identify mis-implementing clients in udp. It is also possible that udp packets are manipulated by filtering ISPs.<br /><br />So I think bram is right to put the udp protocol in a more readable form, but I think adding protocol features would be cool, since nobody knows when a next version of that protocol is spec'd. <br /><br />Another thing I forgot to mention: While it is possible to encrypt tracker traffic via https, and thepiratebay guys consider sniffing ISPs a huge problem for their U.S. users, the udp protocol provides no such protection at all.<br /><br />An action id initiating an RSA or DH handshake could help. Are there ideas for udp proto encryption around?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p493" class="blockpost rowodd">
	<h2><span><span class="conr">#23&nbsp;</span><a href="viewtopic.php?pid=493#p493">2008-09-11 22:20:05</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>The 3 second latency is a problem only for streaming, which is something we do in DNA, but is not yet in uTorrent.&nbsp; The byte overhead is negligible.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p494" class="blockpost roweven">
	<h2><span><span class="conr">#24&nbsp;</span><a href="viewtopic.php?pid=494#p494">2008-09-11 22:39:02</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<p>If a UDP tracker reboots how does it handle loss of connection id state?&nbsp; <br /><br />There is an error message in the protocol, but the message includes no response code.&nbsp; If connection id state is lost, we should have a standardized response code that tells the client that it needs to obtain a new connection id.&nbsp; Ummm... Is my interpretation correct?<br /><br />I don't like the standardized 2 minute time-to-live for the connection id.&nbsp; If we allow longer term connection id's, the overhead would be small to just return an error when the connection id is no longer valid thus forcing the client to update its connection id.&nbsp; It wouldn't require changing any message in the protocol except the error message and it would work with existing clients that update more often.... although adding an error code to the error message would mess up error messages on old clients.&nbsp; Is that acceptable?</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div id="p495" class="blockpost rowodd">
	<h2><span><span class="conr">#25&nbsp;</span><a href="viewtopic.php?pid=495#p495">2008-09-11 22:39:46</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postleft">
				<dl>
					<dt><strong><a href="profile.php?id=89601">dave</a></strong></dt>
					<dd class="usertitle"><strong>Editor</strong></dd>
					<dd class="postavatar"></dd>
				</dl>
			</div>
			<div class="postright">
				<h3> Re: Discussion of BEP 15: UDP Tracker Protocol</h3>
				<div class="postmsg">
					<blockquote><div class="incqbox"><p>we can not identify mis-implementing clients in udp.</p></div></blockquote><p>This is important.&nbsp; We should have some client id in the connect.&nbsp; It could be &quot;SUGGESTED&quot; for the client but &quot;REQUIRED&quot; for the tracker.&nbsp; &nbsp;This would provide backward compatibility.<br /><br />Unfortunately the existing BitTorrent protocol has no clean way to specify client id.&nbsp; Instead we have the mess that is the peer id.&nbsp; I am not sure the best way to do this. Maybe put an LTEP-style bencoded dict appended to the end of the connect message (see LTEP <a href="http://www.bittorrent.org/beps/bep_0010.html" rel="nofollow">http://www.bittorrent.org/beps/bep_0010.html</a>)?&nbsp; <br /><br />LTEP would solve extensibility and client id in one step.<br /><br /></p><blockquote><div class="incqbox"><p>I think adding protocol features would be cool</p></div></blockquote><p>Maybe necessary.</p>
				</div>
			</div>
			<div class="clearer"></div>
			<div class="postfootleft"><p>Offline</p></div>
			<div class="postfootright"><div>&nbsp;</div></div>
		</div>
	</div>
</div>

<div class="postlinksb">
	<div class="inbox">
		<p class="postlink conr">&nbsp;</p>
		<p class="pagelink conl">Pages: <strong>1</strong>&nbsp;<a href="viewtopic.php?id=18&amp;p=2">2</a></p>
		<ul><li><a href="index.php">Index</a></li><li>&nbsp;&raquo;&nbsp;<a href="viewforum.php?id=25">BEPs</a></li><li>&nbsp;&raquo;&nbsp;Discussion of BEP 15: UDP Tracker Protocol</li></ul>
		<div class="clearer"></div>
	</div>
</div>

<div id="brdfooter" class="block">
	<h2><span>Board footer</span></h2>
	<div class="box">
		<div class="inbox">

			<div class="conl">
				<form id="qjump" method="get" action="viewforum.php">
					<div><label>Jump to
					<br /><select name="id" onchange="window.location=('viewforum.php?id='+this.options[this.selectedIndex].value)">
						<optgroup label="BitTorrent">
							<option value="26">Announcements</option>
							<option value="25" selected="selected">BEPs</option>
							<option value="29">BEP process</option>
							<option value="27">General</option>
							<option value="33">Research Tools</option>
							<option value="32">Cooperation between BitTorrent and ISPs</option>
							<option value="30">Attacks against BitTorrent</option>
							<option value="28">Feature Requests, Found Bugs &gt;&gt;&gt;</option>
					</optgroup>
					</select>
					<input type="submit" value=" Go " accesskey="g" />
					</label></div>
				</form>
			</div>
			<p class="conr">Powered by <a href="http://fluxbb.org/">FluxBB</a></p>
			<div class="clearer"></div>
		</div>
	</div>
</div>

</div>
</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-116155-1";
_udn = "utorrent.com";
urchinTracker();
</script>

</body>
</html>
